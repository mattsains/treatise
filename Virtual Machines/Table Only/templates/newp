    movsx rax, word [rsi]
    lea rax, [rsi + rax - 2]
    add rsi, 2
    mov rdi, [rax]
    shl rdi, 3
    add rdi, 8
    push rax
    push rsi
    call malloc
    pop rsi
    mov [registers+{i}*8], rax
    mov rbx, rax
    pop rax
    and rax, ~1111b
    or rax, 10b
    mov [rbx], rax
    xor rax, rax