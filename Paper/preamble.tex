\documentclass[a4paper,10pt]{report}

% Language
\usepackage[UKenglish]{babel}    % define culture for rendering (eg., hyphenation rules)
\usepackage[T1]{fontenc}       % use utf8 fonts
\usepackage[utf8]{inputenc}      % input encoding is utf8
\usepackage{lmodern}             % use font Latin Modern

% Supreme boilerplating
\usepackage{etex}                % LaTeX 2.0 features on relics
\usepackage{microtype}           % Extremely anal typographic mode
\usepackage{url}                 % Ability to create URLs
\usepackage[hidelinks]{hyperref} % Makes intradocument links, eg., contents page
\usepackage{color}               % Adds colour features. Really.
\usepackage{graphicx}            % Adds image features
\usepackage{listings}
\usepackage{multirow}
\usepackage{longtable}
% Layout
\usepackage[a4paper]{geometry}   % In case I want to set margins etc.
\usepackage{setspace}            % For setting line spacing
\usepackage{parskip}
\usepackage{enumerate}           % Allows different types of numbering
\onehalfspacing
% Fix big margin-top on 'Chapter x'
\usepackage{titlesec}
\titlespacing*{\chapter}{0pt}{-50pt}{20pt}
\titleformat{\chapter}[display]{\normalfont\huge\bfseries}{\chaptertitlename\ \thechapter}{20pt}{\Huge}

% Actual Packages
\usepackage{fixme}

\usepackage{amsmath}             % Imports for maths things
\usepackage{amssymb}
\usepackage{amsthm}
\usepackage{empheq}              % For highlighting mathematics
\usepackage{tikz}
\usetikzlibrary{arrows,shapes,decorations.pathreplacing,decorations.pathmorphing,calc,patterns,scopes,trees,positioning,fit}
\usepackage{pgfplots}
\pgfplotsset{compat=1.7}
\pgfkeys{/pgf/number format/relative round mode=fixed}

% Bug Fixes
\usepackage{fixltx2e}            % LaTeX bugfixes (yes really)

\usepackage[authoryear, round, sort]{natbib} % References
% "fix the natbib spacing character" - Kevin Naudé
\makeatletter
\ifdefined \NAT@spacechar
	\def\NAT@spacechar{~}
\fi
\makeatother

\hypersetup{pageanchor=false}    % Wait until actual start of writing before making page anchors

\definecolor{nmmu_blue}{cmyk}{0.99,0.48,0,0.56}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%555
% Macros
\makeatletter
\renewcommand{\maketitle}{
	\newpage
	\null
	\begin{center}%
	\includegraphics[width=\textwidth]{nmmu.jpg}
	\vskip 2em%
		{\color{nmmu_blue}
			\rule{\textwidth}{2pt}
			\vskip 2em%
			
			{\huge \textbf{\@title} \par}%
		}
				\vskip 1em%
				{\Large Author: \it{\@author} \par}
				{\Large Supervisor: \it{Kevin Naudé}}
				\vskip 2em%
			\textcolor{nmmu_blue}{\rule{\textwidth}{2pt}}
	\end{center}%
	\par}
\makeatother

% Restarts numbering and sets format to 1, 2, 3...
\newcommand \startrealnumbers { 
	\pagenumbering{arabic}
	\setcounter{page}{1} 
	\hypersetup{pageanchor=true}
}

% Renders a bibliography on its own page, and adds a contents reference.
\newcommand \bibliographysection {
	\cleardoublepage
	\phantomsection
	\addcontentsline{toc}{chapter}{Bibliography}
	\bibliographystyle{authordate3}
	\bibliography{bibliography}
}

\newcommand \todo \fxwarning

\renewcommand \todo [1] { {\color{red}(TODO: #1)} } %Remove for final version
	

\newcommand \nakedchapter [1] {
	\chapter*{#1}
	\addcontentsline{toc}{chapter}{#1}
}


\newenvironment{myfigure}
	{ 	\begin{figure}
		\hrule \vskip 1em
		\begin{minipage}{\textwidth} \centering
	}
	{	\end{minipage}
		\vskip 1em \hrule
		\end{figure}
	}

\newenvironment{doublefig}
	{
		\begin{figure}
		\hrule \vskip 1em
	}
	{
		\vskip 1em \hrule
		\end{figure}
	}
\newenvironment{halffig}
	{ \begin{minipage}[b]{0.45\textwidth}\centering }
	{ \end{minipage}\hfill }

\lstset{xleftmargin=1em, basicstyle=\ttfamily}